<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.hjc.dao.RestaurantDao">

    <resultMap type="cn.hjc.entity.CookBook" id="cookResultMap">
        <id property="cookId" column="cook_id"/>
        <result property="cookName" column="cook_name"/>
        <result property="cookFlavor" column="cook_flavor"/>
        <result property="cookRepertory" column="cook_repertory"/>
        <result property="cookPrice" column="cook_price"/>
        <result property="cookType" column="cook_type"/>
    </resultMap>

    <select id="getCookByCondition" parameterType="cookBook" resultType="CookBook" resultMap="cookResultMap">
        SELECT
        tb_cook_book.cook_id,
        tb_cook_book.cook_name,
        tb_cook_book.cook_flavor,
        tb_cook_book.cook_repertory,
        tb_cook_book.cook_price,
        tb_cook_book.cook_type
        FROM
        tb_cook_book
        <where>
            <if test="cookName != '' and cookName != null">
                and tb_cook_book.cook_name LIKE CONCAT('%',#{cookName},'%')
            </if>
            <if test="cookFlavor != '' and cookFlavor != null">
                and tb_cook_book.cook_flavor LIKE CONCAT('%',#{cookFlavor},'%')
            </if>
            <if test="cookType != '' and cookType != null">
                and tb_cook_book.cook_type LIKE CONCAT('%',#{cookType},'%')
            </if>
        </where>
    </select>

    <select id="getCookFlavor" resultType="cookBook" resultMap="cookResultMap">
        SELECT tb_cook_book.cook_flavor
        FROM tb_cook_book
        GROUP BY tb_cook_book.cook_flavor
    </select>

    <select id="getCookType" resultType="cookBook" resultMap="cookResultMap">
        SELECT tb_cook_book.cook_type
        FROM tb_cook_book
        GROUP BY tb_cook_book.cook_type
    </select>
</mapper>
    